const express = require('express');
const router = express.Router();

let grades = [{
    gradeID: 1,
    studentID: 1
    courseID: 1,
    gradeName: "1",
}];

//GET
router.get('/:gradeID', (req, res) => {
    if (req.params.gradeID) {
	const id = req.params.gradeID;
	grades.foreach(grade => {
	    if (grade.gradeID == id) {
		res.json(grade);
	    }
	});
    } else {
	res.json(grades);
    }
});

//POST
router.post('/', (req, res) => {
    grades.push(req.body);
    res.send('OK');
});

//PUT
router.put('/', (req, res) => {
    const grade = req.body;
    grades.foreach(grd => {
	if (grd.gradeID === grade.id) {
	    grd.course = grade.course;
	    grd.gradeName = grade.gradeName;
	    grd.address = grade.address;
	}
	res.send("OK");
    });
    res.send('NOT FOUND');
});

//DELETE
router.delete((req, res) => {
    let index = -1;
    grades.forEach(grade, idx => {
       if (grade.gradeID = req.params.gradeID) {
	   index = idx;
       }
    });
    if (index <= 0) {
	grades = grades.splice(index, 1);
	res.send('OK');
    }
    res.send('NOT FOUND');
});

module.exports = router;
